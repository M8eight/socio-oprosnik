<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>–°–æ—Ü–∏–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –ø—Ä–æ–µ–∫—Ç</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&family=Playfair+Display:wght@700;900&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <!-- –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —á–∞—Å—Ç–∏—Ü—ã -->
    <div class="particles" id="particles"></div>

    <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
    <nav class="navbar navbar-expand-lg fixed-top">
      <div class="container-fluid">
        <div class="d-flex ms-auto">
          <div
            class="user-badge text-light"
            data-bs-toggle="modal"
            data-bs-target="#leaderboardModal"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              fill="currentColor"
              viewBox="0 0 16 16"
            >
              <path
                d="M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6"
              />
            </svg>
            <span id="nickname-display">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</span>
          </div>
        </div>
      </div>
    </nav>

    <!-- –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ -->
    <div class="page active" id="page1">
      <section class="hero">
        <div class="hero-content">
          <h1 class="title-main">–°–æ—Ü–∏–æ –ª–∏–∫–±–µ–∑ ‚Äî</h1>
          <h2 class="title-sub">–°—Ç—É–¥–µ–Ω—á–µ—Å–∫–∏–π –ø—Ä–æ–µ–∫—Ç –≤ —Å—Ñ–µ—Ä–µ —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö –Ω–∞—É–∫</h2>
        </div>

        <div class="cards-grid">
          <div class="game-card">
            <div class="card-icon-wrapper card-icon-blue">üìö</div>
            <h3 class="card-title">–¢–µ–æ—Ä–∏—è –∏ —Ç–µ—Ä–º–∏–Ω—ã</h3>
            <p class="card-desc">
              –ò–∑—É—á–∏ –æ—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–Ω—è—Ç–∏—è —Å–æ—Ü–∏–æ–ª–æ–≥–∏–∏ –∏ —É–∑–Ω–∞–π –æ –≤–µ–ª–∏–∫–∏—Ö —Å–æ—Ü–∏–æ–ª–æ–≥–∞—Ö
            </p>
            <div class="progress-bar-custom">
              <div class="progress-fill" style="width: 60%"></div>
            </div>
            <p class="card-score">üèÜ 3 / 5</p>
            <button
              class="card-btn"
              data-bs-toggle="modal"
              data-bs-target="#theoryModal"
            >
              –û—Ç–∫—Ä—ã—Ç—å —ç—Ç–∞–ø—ã
            </button>
          </div>

          <div class="game-card disabled-card">
            <div class="card-icon-wrapper card-icon-green">üíº</div>
            <h3 class="card-title">–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏</h3>
            <p class="card-desc">
              –†–µ—à–∞–π —Ä–µ–∞–ª—å–Ω—ã–µ —Å–æ—Ü–∏–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏ –æ —Ç—Ä—É–¥–µ, –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ –∏
              –∞–∫—Ç–∏–≤–∏–∑–º–µ
            </p>
            <div class="progress-bar-custom">
              <div class="progress-fill" style="width: 0%"></div>
            </div>
            <p class="card-score">üèÜ 0 / 5</p>
            <button
              class="card-btn"
              data-bs-toggle="modal"
              data-bs-target="#practiceModal"
            >
              –û—Ç–∫—Ä—ã—Ç—å —ç—Ç–∞–ø—ã
            </button>
          </div>

          <div class="game-card">
            <div class="card-icon-wrapper card-icon-purple">üìû</div>
            <h3 class="card-title">–û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å</h3>
            <p class="card-desc">–ü—Ä–æ–π–¥–∏ –æ–ø—Ä–æ—Å –∏ –ø–æ–º–æ–≥–∏ –Ω–∞–º —É–ª—É—á—à–∏—Ç—å –ø—Ä–æ–µ–∫—Ç</p>
            <div class="progress-bar-custom">
              <div class="progress-fill" style="width: 0%"></div>
            </div>
            <p class="card-score">–ü–∏—à–∏—Ç–µ</p>
            <button
              class="card-btn"
              data-bs-toggle="modal"
              data-bs-target="#feedbackModal"
            >
              –ü—Ä–æ–π—Ç–∏!
            </button>
          </div>
        </div>
      </section>
    </div>

    <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –≤–∏–∑—É–∞–ª—å–Ω–æ–π –Ω–æ–≤–µ–ª–ª—ã -->
    <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –≤–∏–∑—É–∞–ª—å–Ω–æ–π –Ω–æ–≤–µ–ª–ª—ã -->
    <div class="page" id="page2">
      <section class="visual-novel">
        <div class="vn-controls">
          <button class="vn-control-btn" onclick="skipText()">
            –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å ‚ñ∏‚ñ∏
          </button>
          <button class="vn-control-btn vn-exit-btn" onclick="backToMenu()">
            –í—ã–π—Ç–∏
          </button>
        </div>

        <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π -->
        <div id="charactersContainer">
          <div
            id="char_A"
            class="vn-character-sprite"
            style="
              background-image: url('');
              width: 300px;
              height: 450px;
              opacity: 0;
            "
          ></div>
          <div
            id="char_B"
            class="vn-character-sprite"
            style="
              background-image: url('');
              width: 250px;
              height: 400px;
              opacity: 0;
            "
          ></div>
        </div>

        <div class="vn-textbox">
          <div class="vn-nameplate" id="characterName">–ü—Ä–æ—Ñ–µ—Å—Å–æ—Ä</div>
          <div class="vn-dialogue-text" id="dialogueText">
            –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –º–∏—Ä —Å–æ—Ü–∏–æ–ª–æ–≥–∏–∏!
          </div>

          <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –∫–Ω–æ–ø–æ–∫ –≤—ã–±–æ—Ä–∞ -->
          <div id="choicesContainer"></div>
        </div>
      </section>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∏–º–µ–Ω–∏ -->
    <div
      class="modal fade"
      id="nameModal"
      tabindex="-1"
      data-bs-backdrop="static"
      data-bs-keyboard="false"
    >
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header border-0">
            <h5 class="modal-title">üëã –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!</h5>
          </div>
          <div class="modal-body">
            <p
              style="
                color: rgba(255, 255, 255, 0.9);
                font-size: 1.05rem;
                line-height: 1.6;
              "
            >
              –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ—Å—å, —á—Ç–æ–±—ã –º—ã –º–æ–≥–ª–∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤–∞—à –ø—Ä–æ–≥—Ä–µ—Å—Å –∏
              –±–∞–ª–ª—ã.
            </p>
            <input
              type="text"
              class="form-control bg-light text-black"
              id="username-input"
              placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è"
              style="
                background: rgba(255, 255, 255, 0.08);
                border: 2px solid rgba(255, 255, 255, 0.2);
                color: #fff;
                padding: 15px;
                font-size: 1.05rem;
                border-radius: 15px;
                backdrop-filter: blur(10px);
              "
            />
          </div>
          <div class="modal-footer border-0">
            <button
              type="button"
              class="btn"
              id="save-name-button"
              style="
                background: linear-gradient(135deg, #ec4899 0%, #8b5cf6 100%);
                color: white;
                font-weight: 700;
                padding: 12px 30px;
                border-radius: 50px;
                font-size: 1.05rem;
                letter-spacing: 0.5px;
              "
            >
              –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ª–∏–¥–µ—Ä–±–æ—Ä–¥–∞ -->
    <div class="modal fade" id="leaderboardModal" tabindex="-1">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">üèÜ –¢–∞–±–ª–∏—Ü–∞ –ª–∏–¥–µ—Ä–æ–≤</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
            ></button>
          </div>
          <div class="modal-body leaderboard-container">
            <table class="table text-center">
              <thead></thead>
              <tbody id="leaderboard-body">
                <!-- –î–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∏–∑ API —á–µ—Ä–µ–∑ JavaScript -->
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ç–µ–æ—Ä–∏–∏ -->
    <div class="modal fade" id="theoryModal" tabindex="-1">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">–¢–µ–æ—Ä–∏—è: –≠—Ç–∞–ø—ã –æ–±—É—á–µ–Ω–∏—è</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
            ></button>
          </div>
          <div class="modal-body">
            <div
              class="liquid-glass-card mb-3"
              style="position: relative; z-index: 1"
            >
              <p
                style="
                  color: rgba(255, 255, 255, 0.9);
                  font-size: 1.05rem;
                  margin: 0;
                  position: relative;
                  z-index: 2;
                "
              >
                –ù–∞—á–Ω–∏—Ç–µ —É–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω–æ–µ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ –≤ –º–∏—Ä —Å–æ—Ü–∏–æ–ª–æ–≥–∏–∏ —á–µ—Ä–µ–∑
                –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—É—é –≤–∏–∑—É–∞–ª—å–Ω—É—é –Ω–æ–≤–µ–ª–ª—É!
              </p>
            </div>

            <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —ç—Ç–∞–ø–æ–≤ (–±—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω JS) -->
            <div class="stage-container">
              <!-- –≠—Ç–∞–ø—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ renderTheoryStages() -->
            </div>

            <hr
              style="border-color: rgba(255, 255, 255, 0.1); margin: 20px 0"
            />

            <button
              class="btn btn-primary w-100"
              onclick="startSurvey(1)"
              data-bs-dismiss="modal"
              style="
                background: linear-gradient(135deg, #ec4899 0%, #8b5cf6 100%);
                color: white;
                font-weight: 700;
                padding: 18px;
                border-radius: 50px;
                font-size: 1.1rem;
                letter-spacing: 0.5px;
                box-shadow: 0 10px 30px rgba(236, 72, 153, 0.4);
                border: none;
              "
            >
              –ù–∞—á–∞—Ç—å –æ–±—É—á–µ–Ω–∏–µ (–ù–æ–≤–µ–ª–ª–∞) ‚Üí
            </button>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.min.js"></script>
    <script>
      // –°–æ–∑–¥–∞–Ω–∏–µ –∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —á–∞—Å—Ç–∏—Ü
      const particlesContainer = document.getElementById("particles");
      for (let i = 0; i < 30; i++) {
        const particle = document.createElement("div");
        particle.className = "particle";
        particle.style.left = Math.random() * 100 + "%";
        particle.style.animationDelay = Math.random() * 8 + "s";
        particle.style.animationDuration = 5 + Math.random() * 5 + "s";
        particlesContainer.appendChild(particle);
      }

      // window.addEventListener('DOMContentLoaded', () => {
      //     const nameModal = new bootstrap.Modal(document.getElementById('nameModal'));
      //     nameModal.show();
      // });

      // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–º–µ–Ω–∏
      // document.getElementById('save-name-button').addEventListener('click', () => {
      //     const username = document.getElementById('username-input').value.trim();
      //     if (username) {
      //         document.getElementById('nickname-display').textContent = username;
      //         const nameModal = bootstrap.Modal.getInstance(document.getElementById('nameModal'));
      //         nameModal.hide();
      //     }
      // });

      // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –≤–∏–∑—É–∞–ª—å–Ω–æ–π –Ω–æ–≤–µ–ª–ª—ã
      function startSurvey() {
        document.getElementById("page1").classList.remove("active");
        document.getElementById("page2").classList.add("active");
      }

      function backToMenu() {
        document.getElementById("page2").classList.remove("active");
        document.getElementById("page1").classList.add("active");
      }

      function skipText() {
        // –õ–æ–≥–∏–∫–∞ –ø—Ä–æ–ø—É—Å–∫–∞ —Ç–µ–∫—Å—Ç–∞
        console.log("–¢–µ–∫—Å—Ç –ø—Ä–æ–ø—É—â–µ–Ω");
      }

      // –ê–Ω–∏–º–∞—Ü–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–æ–≤ –ø—Ä–∏ —Å–∫—Ä–æ–ª–ª–µ
      const observerOptions = {
        threshold: 0.5,
      };

      const observer = new IntersectionObserver((entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            const progressFills =
              entry.target.querySelectorAll(".progress-fill");
            progressFills.forEach((fill) => {
              const width = fill.style.width;
              fill.style.width = "0%";
              setTimeout(() => {
                fill.style.width = width;
              }, 100);
            });
          }
        });
      }, observerOptions);

      document.querySelectorAll(".game-card").forEach((card) => {
        observer.observe(card);
      });
    </script>
    <script src="./script.js" defer></script>
  </body>
</html>
